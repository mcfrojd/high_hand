<!DOCTYPE html>
<html>
    <head>
        <title>HIGH HAND</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
<body>
    <div class="container">
        <div class="title">Kv√§llens high hand</div>
        <div id="imageContainer"></div>
        <div id="handContainer"></div>
        <div id="innehavareContainer"></div>
    </div>

    <script>
        const GIST_URL = 'https://gist.githubusercontent.com/mcfrojd/04b858bc728bf5df64b49929822fd550/raw/highhand.json';
        
        async function loadVariables() {
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${GIST_URL}?v=${timestamp}`);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error loading variables:', error);
                return {};
            }
        }

        async function displayImages() {
            const images = await loadVariables();
            const container = document.getElementById('imageContainer');
            const handDiv = document.getElementById('handContainer');
            const innehavareDiv = document.getElementById('innehavareContainer');
            
            container.innerHTML = '';
            
            // Display card images
            for (let i = 1; i <= 5; i++) {
                const imageDiv = document.createElement('div');
                imageDiv.className = 'image-wrapper';
                
                const img = document.createElement('img');
                const imageKey = `kort${i}`;
                const cardValue = images[imageKey]?.slice(0, -1);
                
                img.src = cardValue === 'nn' ? 
                    'images/nn.png' : 
                    `images/${images[imageKey]}.png`;
                    
                img.alt = `Card ${i}`;
                imageDiv.appendChild(img);
                container.appendChild(imageDiv);
            }

            handDiv.textContent = images.hand || '';
            innehavareDiv.textContent = images.innehavare || '';
        }

        // Initial display
        displayImages();
        
        // Update every 10 seconds
        setInterval(displayImages, 10000);
    </script>
</body>
</html>